<p id="notice"><%= notice %></p>
<%= stylesheet_link_tag "products.css" %>

<h1>Products</h1>

<row>
    <span class="span ml"><%= link_to 'admin', users_products_path %></span>
</row>

<row class="row-mt-2">
  <div class="col">
    <table class="table table-striped table-hover">
      <thead class="thead-dark">
        <tr>
          <th>Product name</th>
          <th>Product detail</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Status</th>
          <th>Image</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @products.each do |product| %>
          <tr>
            <td><%= product.product_name %></td>
            <td><%= product.product_detail %></td>
            <td><%= product.price %></td>
            <td><%= product.quantity %></td>
            <td><%= product.status.presence || 'NA' %></td>
            <td>
              <% if product.primary_image.attached? %>
                <%= image_tag(product.primary_image, width:32) %>
              <% else %>
                <%= 'None' %>
              <%end%>
            </td>
            <td><span style="margin-right: 5%"><%= link_to '<i class="fas fa-eye"></i>'.html_safe, home_path(product) %></span></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</row>
<%= paginate @products %>

<div class="products">
  <div class="row">

      <% @products.each do |product| %>
      <div class="col">
        <div class="product">
          <div class="product-content">
            <div class="product-primary-img">
              <div class="product-primary-img-frame">
              <% if product.primary_image.attached? %>
                <%= image_tag(product.primary_image, style: 'width:100%;') %>
              <% else %>
                <%= image_tag("default_image.jpeg", style: 'width:100%;') %>
              <%end%>
              </div>
            </div>
            <div class="product-sup-img-container">
              <row>
                <% if product.supported_images.attached? %>
                  <% (0...product.supported_images.count).each do |pic| %>
                    <div class="product-sup-img">
                      <div class="product-sup-img-frame">
                        <%= image_tag(product.supported_images[pic], style: 'width:100%;') %>
                      </div>
                    </div>
                  <%end%>
                <% else %>
                  <div class="product-sup-img">
                    <div class="product-sup-img-frame">
                      <%= image_tag("default_image.jpeg", style: 'width:100%;') %>
                    </div>
                  </div>
                <%end%>
                </row>
            </div>
            <div class="sm-title"><%= product.product_name %></div>
            <div class="product-detail"><%= product.product_detail %></div>
          </div>
        </div>
      </div>
    <%end%>

  </div>
</div>
